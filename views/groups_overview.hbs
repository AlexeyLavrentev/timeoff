
{{> header }}

<h1>{{t "groups.title"}}</h1>

{{> show_flash_messages }}

<div class="row">
  <div class="col-md-4 lead">{{t "groups.allGroups"}}</div>
  <div class="col-md-4 col-md-offset-4">
    <button class="btn btn-info pull-right" data-toggle="modal" data-target="#add_new_group_modal" type="button" id="add_new_group_btn">{{t "groups.addNew"}}</button>
  </div>
</div>

<div class="row">&nbsp;</div>

{{# unless groups.length }}
<div class="row">
    <div class="col-md-4">{{t "groups.noGroups"}}</div>
</div>
{{/unless}}

<div class="row">

  <div class="col-md-12">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>{{t "groups.name"}}</th>
          <th>{{t "groups.members"}}</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        {{#each groups}}
        <tr>
          <td><a href="/settings/groups/edit/{{this.id}}/">{{this.name}}</a></td>
          <td>{{this.users.length}}</td>
          <td><a href="/settings/groups/edit/{{this.id}}/" class="btn btn-link btn-xs pull-right"><span class="fa fa-chevron-right"></span></a></td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </div>

</div>

<div class="modal fade" id="add_new_group_modal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form method="post" action="/settings/groups/">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="{{t 'common.close'}}"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title">{{t "groups.addNew"}}</h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label class="control-label" for="group_name">{{t "groups.name"}}</label>
            <input class="form-control" id="group_name" name="name" required>
          </div>
          <div class="form-group">
            <label for="group_max_critical_overlap" class="control-label">{{t "groups.maxCriticalOverlap"}}</label>
            <input type="number" class="form-control" id="group_max_critical_overlap" name="max_critical_overlap" min="1" max="50" value="1">
            <span class="help-block">{{t "groups.overlapHelp"}}</span>
          </div>
          <div class="form-group">
            <div class="checkbox">
              <label>
                <input type="checkbox" name="is_hr_group">
                {{t "groups.hrModeLabel"}}
              </label>
            </div>
            <span class="help-block">{{t "groups.hrModeHelp"}}</span>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-success">{{t "groups.save"}}</button>
        </div>
      </form>
    </div>
  </div>
</div>

{{> footer }}
